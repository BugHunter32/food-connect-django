{% extends 'core/base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>Donor Dashboard</h2>
    <a href="{% url 'create_donation' %}" class="btn btn-primary">Post a New Food Donation</a>
</div>
<p class="lead">Welcome, {{ user.organization_name }}! Here are your donation listings.</p>
<div class="card"><div class="card-header">Your Donations</div><div class="table-responsive">
<table class="table table-striped table-hover mb-0"><thead><tr><th>Food Details</th><th>Pickup Time</th><th>Status</th><th>Claimed By (NGO)</th></tr></thead><tbody>
{% for donation in donations %}
<tr>
    <td>{{ donation.food_description|truncatewords:10 }}</td>
    <td>{{ donation.pickup_time }}</td>
    <td><span class="badge {% if donation.status == 'available' %}bg-success{% endif %}{% if donation.status == 'claimed' %}bg-warning text-dark{% endif %}{% if donation.status == 'delivered' %}bg-secondary{% endif %}">{{ donation.get_status_display }}</span></td>
    <td>{% if donation.claimed_by %}{{ donation.claimed_by.organization_name }}<br><small class="text-muted">{{ donation.claimed_by.phone_number }}</small>{% else %}-{% endif %}</td>
</tr>
{% empty %}<tr><td colspan="4" class="text-center">You have not posted any donations yet.</td></tr>
{% endfor %}
</tbody></table></div></div>
{% endblock %}